
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>6. Lab 2: Writing a Talker and Listener &#8212; COMP3631 Website</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=605502e1" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script src="_static/documentation_options.js?v=296c0a1b"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lab2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7. Lab 3: Actuating the turtlebot in simulation" href="lab3.html" />
    <link rel="prev" title="5. Lab 1.2: Learn about the command line interface and Git/GitHub" href="lab1-optional.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/comp3631-logo-large-title.png" class="logo__image only-light" alt="COMP3631 Website - Home"/>
    <script>document.write(`<img src="_static/comp3631-logo-large-title.png" class="logo__image only-dark" alt="COMP3631 Website - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    COMP3631 Lab Worksheets
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="teaching-assistants.html">2. Teaching/Lab Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">3. Frequently Asked Questions (FAQ) and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab1.html">4. Lab 1.1: Setting up your environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab1-optional.html">5. Lab 1.2: Learn about the command line interface and Git/GitHub</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">6. Lab 2: Writing a Talker and Listener</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab3.html">7. Lab 3: Actuating the turtlebot in simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab4.html">8. Lab 4: Mapping and Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab5.html">9. Lab 5: Computer Vision: Processing robot’s camera view</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_the_real_robot.html">10. How to use the real-robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab6.html">11. Lab 6: Real-robot lab</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lab 2: Writing a Talker and Listener</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#worksheet-objective">6.1. Worksheet Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ros2-packages">6.2. ROS2 Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#talker-publisher">6.3. Talker (Publisher)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-publisher-node">6.3.1. Running the publisher node</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listener">6.4. Listener</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-listener-node">6.4.1. Running the listener node</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-a-ros-launch-file">6.5. Using a ROS launch file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#useful-ros-commands">6.6. Useful ROS commands</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-writing-a-numeric-talker-and-listener">6.7. Exercise: Writing a numeric talker and listener</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remarks-and-checklist">6.8. Remarks and Checklist</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lab-2-writing-a-talker-and-listener">
<h1><span class="section-number">6. </span>Lab 2: Writing a Talker and Listener<a class="headerlink" href="#lab-2-writing-a-talker-and-listener" title="Link to this heading">#</a></h1>
<!-- **Worksheet Contact:** Rafael Papallas (r.papallas@leeds.ac.uk) -->
<p><strong>Worksheet Contact:</strong> Xiao Wang (<a class="reference external" href="mailto:x&#46;wang16&#37;&#52;&#48;leeds&#46;ac&#46;uk">x<span>&#46;</span>wang16<span>&#64;</span>leeds<span>&#46;</span>ac<span>&#46;</span>uk</a>)</p>
<p>Please aim to complete this worksheet during week 3. The labs scheduled in week
3 will offer support and guidance for this worksheet.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Access lab2 files - Instructions</strong></p>
<p>To access the lab2 files, you need to click on this url
<a class="reference external" href="https://classroom.github.com/a/FHGCdwyE">classroom.github.com/a/FHGCdwyE</a>,
login to your GitHub account and click the button to accept the lab2
assignment.</p>
<p>As always, before you start running any commands or code for this worksheet,
make sure <a class="reference internal" href="lab1.html#singularity-command"><span class="std std-ref">you are in a Singularity environment</span></a>.</p>
<p>Then execute the following commands:</p>
<ul class="simple">
<li><p>In a terminal, go to <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/ros2_ws/src</span></code>.</p></li>
<li><p>Run: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;github.com:COMP3631/lab2-YOUR_GITHUB_USERNAME</span> <span class="pre">lab2</span></code></p>
<ul>
<li><p>Note the ” lab2” at the end of the the command: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">[...]</span> <span class="pre">lab2</span></code>.</p></li>
</ul>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">$HOME/ros2_ws</span></code> and then <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code> to build the new package.</p></li>
</ul>
</div>
<section id="worksheet-objective">
<h2><span class="section-number">6.1. </span>Worksheet Objective<a class="headerlink" href="#worksheet-objective" title="Link to this heading">#</a></h2>
<p>The objective of this worksheet is to familiarise you with key ROS (Robot
Operating System) concepts such as topics, publishers, and subscribers. These
elements are essential to understanding and effectively utilising ROS. While
this worksheet does not involve programming a robot, the concepts you learn
here will be instrumental for future activities where you will apply these
principles in actual robot programming.</p>
</section>
<section id="ros2-packages">
<h2><span class="section-number">6.2. </span>ROS2 Packages<a class="headerlink" href="#ros2-packages" title="Link to this heading">#</a></h2>
<p>As discussed in last week’s lecture, a ROS2 package organises related code and
files within a named directory. This is a fundamental aspect of structuring and
managing projects in ROS2.</p>
<p>The lab worksheets that we will be releasing in the upcoming weeks, including
<code class="docutils literal notranslate"><span class="pre">lab1</span></code>, <code class="docutils literal notranslate"><span class="pre">lab2</span></code>, and others, are structured as directories located under
<code class="docutils literal notranslate"><span class="pre">~/ros2_ws/src</span></code>. Each of these directories is, in fact, a ROS2 package.</p>
<p>If you’re interested, you have the option to create your own ROS2 packages.
You can optionally learn more <a class="reference external" href="https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">here</a>.</p>
</section>
<section id="talker-publisher">
<h2><span class="section-number">6.3. </span>Talker (Publisher)<a class="headerlink" href="#talker-publisher" title="Link to this heading">#</a></h2>
<p>Let’s begin by studying a basic publisher and subscriber, a concept we
explored in last week’s lecture too. Our goal is to create simple ROS nodes that
exchange messages over the network.</p>
<p>In ROS, it’s possible to use either Python or C++ for writing ROS nodes.
However, for this module, we’ll concentrate on using Python. We need to
create two nodes: the publisher and the subscriber. These
nodes will exchange “Hello World” messages. You’ll find
all the necessary files for this already included in your <code class="docutils literal notranslate"><span class="pre">lab2</span></code> package. Please
ensure that you have cloned this package as previously directed in the
info box provided at the top of this page.</p>
<p>Open the <code class="docutils literal notranslate"><span class="pre">talker.py</span></code> file under <code class="docutils literal notranslate"><span class="pre">~/ros2_ws/src/lab2/lab2/</span></code> and inspect its content.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">Talker</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 8</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;talker&#39;</span><span class="p">)</span>
<span class="linenos"> 9</span>        <span class="bp">self</span><span class="o">.</span><span class="n">publisher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span>        <span class="n">timer_in_seconds</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="linenos">12</span>        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_timer</span><span class="p">(</span><span class="n">timer_in_seconds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">talker_callback</span><span class="p">)</span>
<span class="linenos">13</span>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">14</span>
<span class="linenos">15</span>    <span class="k">def</span> <span class="nf">talker_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">16</span>        <span class="n">msg</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
<span class="linenos">17</span>        <span class="n">msg</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Hello World, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="si">}</span><span class="s1">&#39;</span>
<span class="linenos">18</span>        <span class="bp">self</span><span class="o">.</span><span class="n">publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="linenos">19</span>        <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Publishing: </span><span class="si">{</span><span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">20</span>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">21</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="linenos">24</span>    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span>    <span class="n">talker</span> <span class="o">=</span> <span class="n">Talker</span><span class="p">()</span>
<span class="linenos">27</span>    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">talker</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">31</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Here is an explanation of each line:</p>
<ul class="simple">
<li><p>Line 1 imports the necessary ROS library, <code class="docutils literal notranslate"><span class="pre">rclpy</span></code>.</p></li>
<li><p>Line 2 imports the <code class="docutils literal notranslate"><span class="pre">Node</span></code> class from <code class="docutils literal notranslate"><span class="pre">rclpy.node</span></code>. We will inherit from that
class and implement new functionality.</p></li>
<li><p>Since our publisher will publish a String, we need to specify the type of the
message. Hence, in Line 3 we import the ROS <code class="docutils literal notranslate"><span class="pre">String</span></code> type.</p></li>
<li><p>Between lines 6 and 20 we define our <code class="docutils literal notranslate"><span class="pre">Talker</span></code> class which inherits from
<code class="docutils literal notranslate"><span class="pre">Node</span></code> class, making this class a ROS Node.</p></li>
<li><p>Between lines 7 and 13 we implement the initialiser of the class.</p>
<ul>
<li><p>In line 8 we call the superclass’ initialiser passing in the name of the
node.</p></li>
<li><p>In line 9 we create a ROS publisher. The first argument is the message
type (a ROS <code class="docutils literal notranslate"><span class="pre">String</span></code>), the second (<code class="docutils literal notranslate"><span class="pre">'chatter'</span></code>) is a string with the name
of the topic we want to publish to and the third argument is the outgoing
message queue size.</p></li>
<li><p>In lines 11-12 we create a timer object. We pass first the frequency
at which we want a method to be called (<code class="docutils literal notranslate"><span class="pre">timer_in_seconds</span></code>), followed by the
method of the class we want to get called (<code class="docutils literal notranslate"><span class="pre">self.talker_callback</span></code>). This way,
we create a way to keep running the <code class="docutils literal notranslate"><span class="pre">talker_callback</span></code> every 0.5 seconds.</p></li>
</ul>
</li>
<li><p>Between lines 15 and 20, we define the <code class="docutils literal notranslate"><span class="pre">talker_callback</span></code> method:</p>
<ul>
<li><p>In line 16, we create a ROS String object (the message we will publish).</p></li>
<li><p>In line 17, we populate the message’s <code class="docutils literal notranslate"><span class="pre">data</span></code> property with the f-string:
“Hello World, {self.counter}”.</p></li>
<li><p>In line 18, we publish the message to the topic (i.e., <code class="docutils literal notranslate"><span class="pre">chatter</span></code>).</p></li>
<li><p>In line 19, we simply log a message (this is equivalent to printing a message
to the terminal, it’s not actually publishing anything to the topic).</p></li>
<li><p>In line 20, we increment the counter by 1.</p></li>
</ul>
</li>
<li><p>In line 24, we initialise ROS communications.</p></li>
<li><p>In line 26, we create an instance of our class.</p></li>
<li><p>In line 27, we run the <code class="docutils literal notranslate"><span class="pre">spin</span></code> method, passing in our object, which keeps the
Python script running until we kill it.</p></li>
</ul>
<section id="running-the-publisher-node">
<h3><span class="section-number">6.3.1. </span>Running the publisher node<a class="headerlink" href="#running-the-publisher-node" title="Link to this heading">#</a></h3>
<p>We can use ROS commands to run our code. In a terminal window, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">run</span> <span class="n">lab2</span> <span class="n">talker</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span></code> command is a ROS command that can run a code from a package.
We don’t need to specify absolute path to file, instead we provide the package
and the name of the target. <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span> <span class="pre">package_name</span> <span class="pre">executable_target</span></code>. ROS is able
to infer this from <code class="docutils literal notranslate"><span class="pre">lab2/setup.py</span></code> file.
You should notice the publisher logging its outputs in the terminal.</p>
</section>
</section>
<section id="listener">
<h2><span class="section-number">6.4. </span>Listener<a class="headerlink" href="#listener" title="Link to this heading">#</a></h2>
<p>Now that the publisher is “talking”, we need to run the listener to listen to
the messages and print them out. Open and inspect the <code class="docutils literal notranslate"><span class="pre">listener.py</span></code> file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span> <span class="nc">Listener</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
<span class="linenos"> 7</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos"> 8</span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;listener&#39;</span><span class="p">)</span>
<span class="linenos"> 9</span>        <span class="bp">self</span><span class="o">.</span><span class="n">subscription</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">listener_callback</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="linenos">10</span>        <span class="bp">self</span><span class="o">.</span><span class="n">subscription</span>  <span class="c1"># prevent unused variable warning</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="k">def</span> <span class="nf">listener_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="linenos">13</span>        <span class="bp">self</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;I heard: </span><span class="si">{</span><span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="linenos">17</span>    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
<span class="linenos">18</span>    <span class="n">listener</span> <span class="o">=</span> <span class="n">Listener</span><span class="p">()</span>
<span class="linenos">19</span>    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="linenos">23</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Explaining new commands (refer to the publisher section for the rest):</p>
<ul class="simple">
<li><p>In line 9, we create a subscriber to the <code class="docutils literal notranslate"><span class="pre">chatter</span></code> topic. We pass the
following arguments: <code class="docutils literal notranslate"><span class="pre">String</span></code> which is the type of the messages we expect
from that topic, <code class="docutils literal notranslate"><span class="pre">chatter</span></code> the name of the topic we want to subscribe to,
<code class="docutils literal notranslate"><span class="pre">self.listener_callback</span></code> a method to process messages received from the
topic, and <code class="docutils literal notranslate"><span class="pre">10</span></code> which is the queue size.</p></li>
<li><p>In line 12, we define a callback for the listener, which defines a single
parameter: <code class="docutils literal notranslate"><span class="pre">msg</span></code>, the message incoming from the topic.</p></li>
<li><p>In line 13, we simply log the message received.</p></li>
</ul>
<section id="running-the-listener-node">
<h3><span class="section-number">6.4.1. </span>Running the listener node<a class="headerlink" href="#running-the-listener-node" title="Link to this heading">#</a></h3>
<p>We simply need to run the listener node.
Open a new terminal window, make sure you are within a Singularity environment, and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">run</span> <span class="n">lab2</span> <span class="n">listener</span>
</pre></div>
</div>
<p>Do you keep getting messages printed to the terminal? If so, well done!</p>
</section>
</section>
<section id="using-a-ros-launch-file">
<h2><span class="section-number">6.5. </span>Using a ROS launch file<a class="headerlink" href="#using-a-ros-launch-file" title="Link to this heading">#</a></h2>
<p>To set up this basic configuration, we had to utilise two separate terminal
windows: one to run the publisher node, and another for the subscriber
node. However, when operating a robot, which often requires running dozens or
even hundreds of nodes, manually opening and managing terminal
windows would be highly impractical and chaotic.</p>
<p>Fortunately, there’s a more efficient solution available! This approach
simplifies the process of running multiple nodes, ensuring a more streamlined
and organised workflow.</p>
<p>Introducing ROS launch files 🪄.</p>
<p>ROS solves this problem with <em>launch files</em>.
These files, which can be written in XML, Python, or YAML, serve as a
blueprint for running ROS applications. They consolidate the
instructions for launching various components of a ROS application into a
single, self-contained file. In this course, we’ll specifically focus on
Python-based launch files, which offer a flexible and powerful way to
orchestrate the execution of multiple ROS nodes simultaneously.</p>
<p>We have an example under <code class="docutils literal notranslate"><span class="pre">~/ros2_ws/src/lab2/launch/chatter.py</span></code>. Open that
file and inspect it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
<span class="linenos"> 6</span>    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
<span class="linenos"> 7</span>            <span class="n">Node</span><span class="p">(</span>
<span class="linenos"> 8</span>                <span class="n">package</span><span class="o">=</span><span class="s1">&#39;lab2&#39;</span><span class="p">,</span>
<span class="linenos"> 9</span>                <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;talker&#39;</span><span class="p">,</span>
<span class="linenos">10</span>                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_talker&#39;</span>
<span class="linenos">11</span>            <span class="p">),</span>
<span class="linenos">12</span>            <span class="n">Node</span><span class="p">(</span>
<span class="linenos">13</span>                <span class="n">package</span><span class="o">=</span><span class="s1">&#39;lab2&#39;</span><span class="p">,</span>
<span class="linenos">14</span>                <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;listener&#39;</span><span class="p">,</span>
<span class="linenos">15</span>                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;my_listener&#39;</span>
<span class="linenos">16</span>            <span class="p">),</span>
<span class="linenos">17</span>        <span class="p">])</span>
</pre></div>
</div>
<p>The file specifies two nodes that are going to be launched (lines 7 and 12).
Note that we specify the package they live in, the <code class="docutils literal notranslate"><span class="pre">executable</span></code> is the file
name (i.e., <code class="docutils literal notranslate"><span class="pre">talker</span></code> for <code class="docutils literal notranslate"><span class="pre">talker.py</span></code>). The <code class="docutils literal notranslate"><span class="pre">name</span></code> simply gives a different name
to the node when we run it. This can be useful if we need to spawn multiple
such nodes.</p>
<p>Let’s kill all previous nodes: in each of the terminal windows, use <code class="docutils literal notranslate"><span class="pre">CTRL-C</span></code> to
kill the nodes. Close all terminal windows. Now open a new terminal window and
simply run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">launch</span> <span class="n">lab2</span> <span class="n">chatter</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Note that, to launch something, we need to specify the package (<code class="docutils literal notranslate"><span class="pre">lab2</span></code>) and the name
of the launch file (<code class="docutils literal notranslate"><span class="pre">chatter.py</span></code>). We can run this command from anywhere, we
don’t have to be in the launch directory. However, you can even use <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">launch</span> <span class="pre">chatter.py</span></code> (without
specifying the package, <code class="docutils literal notranslate"><span class="pre">lab2</span></code>) if your current working directory is <code class="docutils literal notranslate"><span class="pre">~/ros2_ws/src/lab2/launch</span></code>.
Do you see the publishing/subscribing messages being printed? If so, well done!
That’s more convenient, isn’t it?</p>
</section>
<section id="useful-ros-commands">
<h2><span class="section-number">6.6. </span>Useful ROS commands<a class="headerlink" href="#useful-ros-commands" title="Link to this heading">#</a></h2>
<p>ROS provides many command line tools to inspect the state of the ROS
environment. For example, while your launch file is still running, in a new
terminal window run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">node</span> <span class="nb">list</span>
</pre></div>
</div>
<p>This will list the names of all the nodes running currently in the ROS environment.</p>
<p>You can also get information about a specific node. For example, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">node</span> <span class="n">info</span> <span class="o">/</span><span class="n">my_talker</span>
</pre></div>
</div>
<p>Notice that, ROS gives you information about the type of this node, but also about
the topics it is publishing to.
Try running <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">node</span> <span class="pre">info</span></code> for another running node and see what information you get.</p>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">node</span></code>, there is also <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">topic</span></code> to get information about topics. Run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">topic</span> <span class="nb">list</span>
</pre></div>
</div>
<p>This will list all the active topics in your ROS environment.</p>
<p>Again, you can get information about a specific topic. For example, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">topic</span> <span class="n">info</span> <span class="o">/</span><span class="n">chatter</span>
</pre></div>
</div>
<p>Notice that ROS gives you information about the type of the topic and the nodes
publishing to and listening to this topic. Try running <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">topic</span> <span class="pre">info</span></code> on other
topics you have seen in the <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">topic</span> <span class="pre">list</span></code> output.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">topic</span> <span class="pre">echo</span></code>, you can also listen to a particular topic. Execute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">topic</span> <span class="n">echo</span> <span class="o">/</span><span class="n">chatter</span>
</pre></div>
</div>
</section>
<section id="exercise-writing-a-numeric-talker-and-listener">
<h2><span class="section-number">6.7. </span>Exercise: Writing a numeric talker and listener<a class="headerlink" href="#exercise-writing-a-numeric-talker-and-listener" title="Link to this heading">#</a></h2>
<p>Now that you better understand publishing/subscribing in ROS. It’s your turn
to write some code.</p>
<div class="docutils">
<h4 class="rubric" id="creating-a-numeric-talker">Creating a numeric talker</h4>
</div>
<p>Create a copy of <code class="docutils literal notranslate"><span class="pre">talker.py</span></code> under <code class="docutils literal notranslate"><span class="pre">lab2/lab2</span></code> and save it as a new file
<code class="docutils literal notranslate"><span class="pre">numeric_talker.py</span></code>.</p>
<p>Edit this file to include an additional publisher publishing
to a new <code class="docutils literal notranslate"><span class="pre">/numeric_chatter</span></code> topic with message type <code class="docutils literal notranslate"><span class="pre">Int8</span></code> (an 8-bit integer type).</p>
<p>Your talker should keep a counter starting from 0, increment it every time
(resetting back to zero at 127, which is the max value for a
signed 8-bit integer), and publish the value of the counter to the
<code class="docutils literal notranslate"><span class="pre">/numeric_chatter</span></code> topic. You will need to import the new message type to be able
to use it. Do not remove the String publisher to the <code class="docutils literal notranslate"><span class="pre">/chatter</span></code>
topic! A node can publish to multiple topics.</p>
<div class="docutils">
<h4 class="rubric" id="create-a-numeric-listener">Create a numeric listener</h4>
</div>
<p>Create a copy of <code class="docutils literal notranslate"><span class="pre">listener.py</span></code> under <code class="docutils literal notranslate"><span class="pre">lab2/lab2</span></code> and save it as
<code class="docutils literal notranslate"><span class="pre">numeric_listener.py</span></code>.</p>
<p>Edit this file to include an additional subscriber to
the <code class="docutils literal notranslate"><span class="pre">/numeric_chatter</span></code> topic and print the received number in its callback
method. Do not remove the subscriber to the <code class="docutils literal notranslate"><span class="pre">/chatter</span></code> topic! A node can
listen to multiple topics.</p>
<div class="docutils">
<h4 class="rubric" id="create-a-new-launch-file">Create a new launch file</h4>
</div>
<p>Create a copy of the <code class="docutils literal notranslate"><span class="pre">chatter.py</span></code> file under <code class="docutils literal notranslate"><span class="pre">lab2/launch</span></code> and save it as
<code class="docutils literal notranslate"><span class="pre">numeric_chatter.py</span></code>. Edit this file to make the appropriate modifications to
only run the numeric version of the talker-listener nodes.</p>
<div class="docutils">
<h4 class="rubric" id="update-setup-py">Update <code class="docutils literal notranslate"><span class="pre">setup.py</span></code></h4>
</div>
<p>Open <code class="docutils literal notranslate"><span class="pre">lab2/setup.py</span></code> file and locate the block of code
which reads:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">2</span>    <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos">3</span>        <span class="s1">&#39;talker = lab2.talker:main&#39;</span><span class="p">,</span>
<span class="linenos">4</span>        <span class="s1">&#39;listener = lab2.listener:main&#39;</span><span class="p">,</span>
<span class="linenos">5</span>    <span class="p">],</span>
<span class="linenos">6</span><span class="p">},</span>
</pre></div>
</div>
<p>This defines entry points for ROS. When we execute <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span> <span class="pre">lab2</span> <span class="pre">talker</span></code>,
ROS finds what to run from that block. <code class="docutils literal notranslate"><span class="pre">talker</span></code> is equal to the file
<code class="docutils literal notranslate"><span class="pre">talker.py</span></code> under <code class="docutils literal notranslate"><span class="pre">lab2</span></code> (<code class="docutils literal notranslate"><span class="pre">lab2.talker</span></code>) and we instruct to call the <code class="docutils literal notranslate"><span class="pre">main</span></code>
function of that script.</p>
<p>Now, you need to tell ROS about your new Python files. In the <code class="docutils literal notranslate"><span class="pre">lab2/setup.py</span></code>,
add two extra lines underneath the <code class="docutils literal notranslate"><span class="pre">listener</span> <span class="pre">=</span> <span class="pre">lab2.listener:main</span></code> for your two
new Python files following the same idea but using <code class="docutils literal notranslate"><span class="pre">numeric_talker</span></code> and
<code class="docutils literal notranslate"><span class="pre">numeric_listener</span></code> as target names.</p>
<div class="docutils">
<h4 class="rubric" id="build-and-test-your-code">Build and test your code</h4>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every time you make any modifications, even to existing Python files, you need
to run <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code> for the changes to be effective. There is a way to
symlink the files so you don’t have to, but the default behaviour is not to
symlink.</p>
</div>
<p>In a terminal window go under <code class="docutils literal notranslate"><span class="pre">ros2_ws</span></code> and run <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code> to make the new
Python programs available to ROS. Test that your code works as expected by
running <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">launch</span> <span class="pre">lab2</span> <span class="pre">numeric_chatter.py</span></code>.</p>
<div class="docutils">
<h4 class="rubric" id="saving-your-code-on-github">Saving your code on github</h4>
</div>
<p>When you think you have completed this worksheet, add, commit, and push your
new files (<code class="docutils literal notranslate"><span class="pre">numeric_talker.py</span></code>, <code class="docutils literal notranslate"><span class="pre">numeric_listener.py</span></code>, and any other related files
you might have created) and changes to the git repository with the correct git
message <code class="docutils literal notranslate"><span class="pre">Lab2</span> <span class="pre">completed.</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">ros2_ws</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lab2</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">lab2</span><span class="o">/</span><span class="n">numeric_talker</span><span class="o">.</span><span class="n">py</span> <span class="n">lab2</span><span class="o">/</span><span class="n">numeric_listener</span><span class="o">.</span><span class="n">py</span> <span class="n">launch</span><span class="o">/</span><span class="n">numeric_chatter</span><span class="o">.</span><span class="n">py</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Lab2 completed.&quot;</span>
<span class="n">git</span> <span class="n">push</span>
</pre></div>
</div>
<p>You could also use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code> to add all files in the current directory.
If you visit GitHub and go to your <code class="docutils literal notranslate"><span class="pre">lab2</span></code> repository, you should see your
new files there as well. Please double-check.</p>
</section>
<section id="remarks-and-checklist">
<h2><span class="section-number">6.8. </span>Remarks and Checklist<a class="headerlink" href="#remarks-and-checklist" title="Link to this heading">#</a></h2>
<p>This worksheet, while seemingly straightforward, lays the foundation for more
complex scenarios in robotics. Consider a scenario where the publisher
represents a robot and the subscriber is your computer. Instead of a simple
“Hello World” message, imagine the publisher is publishing an image captured
by the robot’s camera sensor. The subscriber, rather than merely displaying the
message, could be a node that processes this image using Computer Vision
algorithms to make intelligent decisions.</p>
<p>In such a context, the principles of ROS topics you’ve learned today become
critically important. The primary differences in more advanced scenarios will
be the type of message being published and the actions you perform with these
messages. We plan to explore such programs in upcoming worksheets,
applying the basic knowledge you’re gaining now to more sophisticated
and realistic robot programming tasks.</p>
<p>Please check, by the end of this worksheet, that …</p>
<ul class="simple">
<li><p>You understand what ROS topics are.</p></li>
<li><p>You understand what ROS publishers and subscribers are.</p></li>
<li><p>You completed successfully the exercises for a numeric talker and listener.</p></li>
<li><p>You understand what ROS launch files are, and you know how to create one.</p></li>
<li><p>You pushed your code to GitHub.</p></li>
</ul>
<p>If you have any questions or problems, please kindly ask one of the Teaching
Assistants of the module for help during the lab hours, or contact me.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lab1-optional.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5. </span>Lab 1.2: Learn about the command line interface and Git/GitHub</p>
      </div>
    </a>
    <a class="right-next"
       href="lab3.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">7. </span>Lab 3: Actuating the turtlebot in simulation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#worksheet-objective">6.1. Worksheet Objective</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ros2-packages">6.2. ROS2 Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#talker-publisher">6.3. Talker (Publisher)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-publisher-node">6.3.1. Running the publisher node</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#listener">6.4. Listener</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#running-the-listener-node">6.4.1. Running the listener node</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-a-ros-launch-file">6.5. Using a ROS launch file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#useful-ros-commands">6.6. Useful ROS commands</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-writing-a-numeric-talker-and-listener">6.7. Exercise: Writing a numeric talker and listener</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#remarks-and-checklist">6.8. Remarks and Checklist</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yanlong Huang, Andy Bulpitt, Xiao Wang
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Yanlong Huang, Andy Bulpitt, Xiao Wang.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>