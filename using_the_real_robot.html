
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>10. How to use the real-robot &#8212; COMP3631 Website</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=605502e1" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script src="_static/documentation_options.js?v=296c0a1b"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'using_the_real_robot';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="11. Lab 6: Real-robot lab" href="lab6.html" />
    <link rel="prev" title="9. Lab 5: Computer Vision: Processing robot’s camera view" href="lab5.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/comp3631-logo-large-title.png" class="logo__image only-light" alt="COMP3631 Website - Home"/>
    <script>document.write(`<img src="_static/comp3631-logo-large-title.png" class="logo__image only-dark" alt="COMP3631 Website - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    COMP3631 Lab Worksheets
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="teaching-assistants.html">2. Teaching/Lab Assistants</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">3. Frequently Asked Questions (FAQ) and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab1.html">4. Lab 1.1: Setting up your environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab1-optional.html">5. Lab 1.2: Learn about the command line interface and Git/GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab2.html">6. Lab 2: Writing a Talker and Listener</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab3.html">7. Lab 3: Actuating the turtlebot in simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab4.html">8. Lab 4: Mapping and Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab5.html">9. Lab 5: Computer Vision: Processing robot’s camera view</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">10. How to use the real-robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab6.html">11. Lab 6: Real-robot lab</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>How to use the real-robot</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#turn-on-the-robot">10.1. Turn on the robot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ssh-to-the-robot-by-its-hostname">10.2. SSH to the robot by its hostname</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#start-the-robot-drivers">10.3. Start the robot drivers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-your-pc-know-which-robot-to-talk-to">10.4. Let your PC know which robot to talk to</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-that-your-pc-is-connected-to-the-robot">10.5. Check that your PC is connected to the robot</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="how-to-use-the-real-robot">
<h1><span class="section-number">10. </span>How to use the real-robot<a class="headerlink" href="#how-to-use-the-real-robot" title="Link to this heading">#</a></h1>
<p><strong>Contact:</strong> Xiao Wang (<a class="reference external" href="mailto:x&#46;wang16&#37;&#52;&#48;leeds&#46;ac&#46;uk">x<span>&#46;</span>wang16<span>&#64;</span>leeds<span>&#46;</span>ac<span>&#46;</span>uk</a>)</p>
<section id="turn-on-the-robot">
<h2><span class="section-number">10.1. </span>Turn on the robot<a class="headerlink" href="#turn-on-the-robot" title="Link to this heading">#</a></h2>
<p>Turn on the robot. There is a black switch at the bottom board (see picture
below). Allow a minute or two for the robot to boot and connect to the Wi-Fi.</p>
<p><img alt="Starting the robot" src="_images/switch_real_robot.jpg" /></p>
</section>
<section id="ssh-to-the-robot-by-its-hostname">
<h2><span class="section-number">10.2. </span>SSH to the robot by its hostname<a class="headerlink" href="#ssh-to-the-robot-by-its-hostname" title="Link to this heading">#</a></h2>
<p>Please note that, to access the robot, you need to SSH to a robot. There is no
GUI. SSH is a tool that lets you remotely connect to another machine using the
command line interface.</p>
<p>You need to be in room 2.07 with the robot and logged in to the university
Linux machines on a desktop PC.</p>
<p>One of you, do the following:</p>
<ol class="arabic simple">
<li><p>Log in to your account on the desktop PC.</p></li>
<li><p>Make sure that the PC is connected to the local network (router). You can
check this by going to the top-right corner, inspect networking and ensure
that the PC is connected to both PCI and non-PCI (USB) network interfaces.
If the non-PCI interface is disabled, please enable it now.</p></li>
<li><p>Each robot has a label with a name. For example “kaylah” (see picture below).
You need this name to <code class="docutils literal notranslate"><span class="pre">ssh</span></code> to the robot.</p></li>
<li><p>Open a terminal window (<strong>not in singularity</strong> and <strong>not in Code</strong>) and
execute the following command: <code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">student&#64;kaylah.local</span></code>. Replace the <code class="docutils literal notranslate"><span class="pre">kaylah</span></code>
part with the name of your robot you are using.
You will be asked a “yes/no” question initially, type
“yes” and hit enter. You will be asked for a password. That’s the password
of the robot, use <code class="docutils literal notranslate"><span class="pre">student</span></code> as the password. You are in. You should see a
prompt <code class="docutils literal notranslate"><span class="pre">student&#64;kaylah</span></code> and ready to execute terminal commands on the robot!</p></li>
</ol>
<p><img alt="" src="_images/robot_name.jpg" /></p>
</section>
<section id="start-the-robot-drivers">
<h2><span class="section-number">10.3. </span>Start the robot drivers<a class="headerlink" href="#start-the-robot-drivers" title="Link to this heading">#</a></h2>
<p>In the simulation labs, when you launched Gazebo, it also launched certain,
simulated, robot
drivers. This wasn’t visible to you then. When working with the real-robot,
obviously you won’t launch Gazebo, but you need to launch the robot drivers.</p>
<p>Note that on the real-robot we do not have a container, everything is installed
on the host operating system.</p>
<p>In the terminal window you SSH’ed into the robot type the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ros2</span> <span class="n">launch</span> <span class="n">turtlebot3_bringup</span> <span class="n">robot</span><span class="o">.</span><span class="n">launch</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The above will launch the robot drivers and the camera driver.</p>
<p>That’s the only command you need to run on the robot. Keep the terminal window
open at all times. You can run everything else on your PC, and ROS will handle
communication with the robot.</p>
</section>
<section id="let-your-pc-know-which-robot-to-talk-to">
<h2><span class="section-number">10.4. </span>Let your PC know which robot to talk to<a class="headerlink" href="#let-your-pc-know-which-robot-to-talk-to" title="Link to this heading">#</a></h2>
<div class="docutils">
<h4 class="rubric" id="background-information">Background information</h4>
</div>
<p>When using ROS over the network, ROS will have a default <code class="docutils literal notranslate"><span class="pre">ROS_DOMAIN_ID</span></code>
(representing a logical division of the network) which will allow it to
discover ROS nodes, topics, services etc. However, in our case we may have
anywhere from 1 to 15 turtlebots on the same network simultaneously, all of
which will use identical node, topic and service names.</p>
<p>We need to logically separate them on the network to avoid conflicts. ROS,
fortunately, offers a way to do this easily. In the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> of each robot we
assigned a unique <code class="docutils literal notranslate"><span class="pre">ROS_DOMAIN_ID</span></code> just for that robot. You need to know the
<code class="docutils literal notranslate"><span class="pre">ROS_DOMAIN_ID</span></code> of the robot you are working with and update your PC’s
<code class="docutils literal notranslate"><span class="pre">ROS_DOMAIN_ID</span></code> to match it.</p>
<p>To make your life easier, we prepared a bash script that you can put in your
<code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> to automate this (including un-setting the <code class="docutils literal notranslate"><span class="pre">ROS_LOCALHOST_ONLY</span></code>
variable). Read the “IMPORTANT: Update your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>” section below to learn
how.</p>
<div class="docutils">
<h4 class="rubric" id="important-update-your-bashrc-one-time-configuration">IMPORTANT: Update your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> (one-time configuration)</h4>
</div>
<p>This is <strong>one-time</strong> configuration.
Please update your .bashrc file and include the following code (copy-paste don’t
type it) at the top of your file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span>workon_real_robot<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nv">names</span><span class="o">=(</span>
<span class="w">        </span><span class="s2">&quot;kaylah&quot;</span>
<span class="w">        </span><span class="s2">&quot;phoebe&quot;</span>
<span class="w">        </span><span class="s2">&quot;davina&quot;</span>
<span class="w">        </span><span class="s2">&quot;cat&quot;</span>
<span class="w">        </span><span class="s2">&quot;delilah&quot;</span>
<span class="w">        </span><span class="s2">&quot;cam&quot;</span>
<span class="w">        </span><span class="s2">&quot;jane&quot;</span>
<span class="w">        </span><span class="s2">&quot;rosa&quot;</span>
<span class="w">        </span><span class="s2">&quot;freya&quot;</span>
<span class="w">        </span><span class="s2">&quot;aisha&quot;</span>
<span class="w">        </span><span class="s2">&quot;frankie&quot;</span>
<span class="w">        </span><span class="s2">&quot;brie&quot;</span>
<span class="w">        </span><span class="s2">&quot;lola&quot;</span>
<span class="w">        </span><span class="s2">&quot;toby&quot;</span>
<span class="w">        </span><span class="s2">&quot;horace&quot;</span>
<span class="w">    </span><span class="o">)</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nv">selected_name</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%s\n&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">names</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>fzf<span class="w"> </span>--prompt<span class="o">=</span><span class="s2">&quot;Select a robot name: &quot;</span><span class="k">)</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="nv">selected_name</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span>!<span class="w"> </span><span class="s2">&quot; </span><span class="si">${</span><span class="nv">names</span><span class="p">[*]</span><span class="si">}</span><span class="s2"> &quot;</span><span class="w"> </span><span class="o">=</span>~<span class="w"> </span><span class="o">[[</span>:space:<span class="o">]]</span><span class="si">${</span><span class="nv">selected_name</span><span class="si">}</span><span class="o">[[</span>:space:<span class="o">]]</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Robot name invalid.&quot;</span>
<span class="w">            </span><span class="k">return</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$selected_name</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No name selected, exiting.&quot;</span>
<span class="w">        </span><span class="k">return</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nv">selected_ros_domain_id</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="p">!names[@]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">names</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$selected_name</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">            </span><span class="nv">selected_ros_domain_id</span><span class="o">=</span><span class="k">$((</span><span class="nv">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
<span class="w">            </span><span class="k">break</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>

<span class="w">    </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;You are set to work with the &#39;</span><span class="si">${</span><span class="nv">selected_name</span><span class="si">}</span><span class="s2">&#39; robot on sub-network </span><span class="nv">$selected_ros_domain_id</span><span class="s2">.\n&quot;</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;[COMP3631] talking to </span><span class="si">${</span><span class="nv">selected_name</span><span class="si">}</span><span class="s2">&gt; \w \$ &quot;</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_LOCALHOST_ONLY</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span><span class="nv">$selected_ros_domain_id</span>
<span class="o">}</span>
</pre></div>
</div>
<p>After the change to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> you need to source it in already running
terminal windows to make the changes effective: <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code>.</p>
<div class="docutils">
<h4 class="rubric" id="the-interactive-way">The interactive way</h4>
</div>
<p>To get the PC connected on the same sub-network with your robot you need to
execute the following command <strong>within a Singularity environment</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">workon_real_robot</span>
</pre></div>
</div>
<p>The above should work out of the box in Code, if you get any errors run:
<code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code>.</p>
<p>This should pull a list of robot names ready for you to select one. You can</p>
<ol class="arabic simple">
<li><p>start typing the name of your robot to filter out the list.</p></li>
<li><p>use the arrows to move and select the name of your robot.</p></li>
</ol>
<p>Once you find the name of your robot in the list, hit ENTER to select it. This
should set up your ROS environment on your PC the right way to be able to talk
with that specific robot and nothing else.</p>
<p>Verify that your prompt now reads <code class="docutils literal notranslate"><span class="pre">[COMP3631]</span> <span class="pre">talking</span> <span class="pre">to</span> <span class="pre">&lt;ROBOT_NAME&gt;&gt;</span></code>, this
is the indicator that your terminal is on the same sub-network with that robot.
Any new terminal windows you open, you need to run the above command and select
your robot (unless you do the configuration in the next section).</p>
<div class="docutils">
<h4 class="rubric" id="the-automatic-way-but-will-require-constant-update-if-you-change-robot">The automatic way (but will require constant update if you change robot)</h4>
</div>
<p>If you are planning to work with the specific robot for a longer period of time,
you can also put a line at the end of your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>. Your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> should
already include an if statement at the end that looks like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span>/opt/ros/humble/<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;[COMP3631] Singularity&gt; \w \$ &quot;</span>

<span class="w">    </span><span class="nb">source</span><span class="w"> </span>/opt/ros/humble/setup.bash
<span class="w">    </span>.<span class="w"> </span>/usr/share/gazebo/setup.sh

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="nv">$HOME</span>/ros2_ws/install/<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/ros2_ws/install/setup.bash
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span><span class="m">30</span><span class="w"> </span><span class="c1">#TURTLEBOT3</span>
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">TURTLEBOT3_MODEL</span><span class="o">=</span>burger
<span class="w">    </span><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_LOCALHOST_ONLY</span><span class="o">=</span><span class="m">1</span>
<span class="k">fi</span>
</pre></div>
</div>
<p>Just put the following line at the end of that if statement (under last export but before the <code class="docutils literal notranslate"><span class="pre">fi</span></code>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>workon_real_robot<span class="w"> </span><span class="o">[</span>ROBOT_NAME<span class="o">]</span>
</pre></div>
</div>
<p>Please note the argument <code class="docutils literal notranslate"><span class="pre">[ROBOT_NAME]</span></code> (which should match a valid robot name)
after <code class="docutils literal notranslate"><span class="pre">workon_real_robot</span></code> which makes this <strong>non-interactive</strong> and it will
automatically set up the machine to be used with the robot name you are
providing as an argument. This will be executed on a new terminal window in
Code, for example, and you won’t need to run it manually. If you start working
with a <strong>different robot or you want to work in simulation</strong>, you will need to
update/remove it. Note that we put that line within the if statement to avoid
changing your terminal’s prompt when not in the container.</p>
</section>
<section id="check-that-your-pc-is-connected-to-the-robot">
<h2><span class="section-number">10.5. </span>Check that your PC is connected to the robot<a class="headerlink" href="#check-that-your-pc-is-connected-to-the-robot" title="Link to this heading">#</a></h2>
<p>To simply verify that the PC is connected and working make sure:</p>
<ol class="arabic simple">
<li><p>In the ssh session with the robot you started the dirvers.</p></li>
<li><p>Open a new terminal (in Code), make sure you are in a singularity container.</p></li>
<li><p>On the PC (not in SSH session) run <code class="docutils literal notranslate"><span class="pre">workon_real_robot</span></code> then run <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">topic</span> <span class="pre">list</span></code>
and you should see a big list of topics, including the familiar <code class="docutils literal notranslate"><span class="pre">/cmd_vel</span></code> from lab 3.</p></li>
</ol>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="lab5.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">9. </span>Lab 5: Computer Vision: Processing robot’s camera view</p>
      </div>
    </a>
    <a class="right-next"
       href="lab6.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">11. </span>Lab 6: Real-robot lab</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#turn-on-the-robot">10.1. Turn on the robot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ssh-to-the-robot-by-its-hostname">10.2. SSH to the robot by its hostname</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#start-the-robot-drivers">10.3. Start the robot drivers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#let-your-pc-know-which-robot-to-talk-to">10.4. Let your PC know which robot to talk to</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-that-your-pc-is-connected-to-the-robot">10.5. Check that your PC is connected to the robot</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Yanlong Huang, Andy Bulpitt, Xiao Wang
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Yanlong Huang, Andy Bulpitt, Xiao Wang.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>